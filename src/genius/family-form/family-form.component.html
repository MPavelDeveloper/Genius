<div class="wrap">
  <div class="create-family">
    <div class="create-family-wrap">
      <div class="wrap-family">
      <div class="family-title">Create family</div>
      <div class="person-screen father">
        <div class="description" [hidden]="family.father">Father</div>
        <div class="description" *ngIf = "family.father">
          <person class="create-person" [person]="family.father" [templateVersion]="'shortestTemplate'"></person>
        </div>
        <div class="actions-wrap" >
          <button class="action-btn" type="button" (click)="createNewParent(personType.FATHER)" [hidden]="family.father">add</button>
          <button class="action-btn" type="button" (click)="selectExistParent(personType.FATHER, selectListType.PERSONS)" [hidden]="family.father" [ngClass] = "{selectHint: interfaceSelectPersonHint}">select</button>
          <button class="action-btn change" type="button" (click)="changeParent(personType.FATHER)" [hidden]="!family.father">change</button>
          <button class="action-btn delete" type="button" (click)="deleteParent(personType.FATHER)" [hidden]="!family.father">delete</button>
        </div>
      </div>

      <div class="person-screen mother">
        <div class="description" [hidden]="family.mother">Mother</div>
        <div class="description" *ngIf = "family.mother">
          <person class="create-person" [person]="family.mother" [templateVersion]="'shortestTemplate'"></person>
        </div>
        <div class="actions-wrap">
          <button class="action-btn" type="button" (click)="createNewParent(personType.MOTHER)" [hidden]="family.mother">add</button>
          <button class="action-btn" type="button" (click)="selectExistParent(personType.MOTHER, selectListType.PERSONS)" [hidden]="family.mother" [ngClass] = "{selectHint: interfaceSelectPersonHint}">select</button>
          <button class="action-btn change" type="button" (click)="changeParent(personType.MOTHER)" [hidden]="!family.mother">change</button>
          <button class="action-btn delete" type="button" (click)="deleteParent(personType.MOTHER)" [hidden]="!family.mother">delete</button>
        </div>
      </div>

      <div class="person-screen">
        <div class="children-plus" >
          <button class="btn-plus" type="button" (click)="addChildTemplate()" [disabled] = "getChildren() && getCompleteChildrenAmount() + 1 === getChildren().length">+</button>
        </div>
        <div class="child-container" *ngFor = 'let child of family.children; let index = index; let first = first; let last = last;'>
          <div class="description" [hidden]="checkChild(index)">Child</div>
          <div class="description" *ngIf = "checkChild(index)">
            <person class="create-person" [person]="child" [templateVersion]="'shortestTemplate'" ></person>
          </div>
          <div class="actions-wrap">
            <button class="action-btn" type="button" (click)="createNewChild(index)" [hidden]="checkChild(index)">add</button>
            <button class="action-btn" type="button" (click)="selectExistChild(index, selectListType.PERSONS)" [hidden]="checkChild(index)" [ngClass] = "{selectHint: interfaceSelectPersonHint}">select</button>
            <button class="action-btn delete" type="button" (click)="changeChild(index)" [hidden]="!checkChild(index)">change</button>
            <button class="action-btn change" type="button" (click)="deleteChild(index)" [hidden]="!checkChild(index)">delete</button>
          </div>
        </div>
      </div>

      <button class="btn-add-family" type="button" (click)="saveFamily()">save Family</button>
    </div>
      <div class="select-list-wrap">
        <div class="select-list-actions">
          <div class="acrions-wrap">
            <button class="action-open" (click)="setSelectListType(selectListType.PERSONS)">Persons</button>
            <button class="action-open" (click)="setSelectListType(selectListType.FAMILIES)">Families</button>
          </div>
          <button class="action-close" *ngIf='currentSelectType !== selectListType.NONE' (click)="setSelectListType(selectListType.NONE)">Close</button>
        </div>
        <div class="select-persons-list" *ngIf ="currentSelectType === selectListType.PERSONS">
          <div class="list_title">
            Persons
          </div>
          <div class="item-person" *ngFor = 'let prs of getPersonsList()'>
            <person class="person-short" [person]="prs" [templateVersion]="'shortTemplate'"  (returnedPerson)="setCurrentPerson($event)"></person>
          </div>
        </div>
        <div class="select-families-list" *ngIf ="currentSelectType === selectListType.FAMILIES">
          <div class="list_title">
            Families
          </div>
          <family *ngFor = "let fml of getFamilyList()" [family]="fml" (returnedFamily)="setCurrentFamily($event)"></family>
        </div>
      </div>
    </div>
    <person-form *ngIf="personDialogVisible" [templateVersion]="personComponentTemplate.FAMILY_FORM" (addedPerson)="addPersonInFamily($event)" [person]="currentPerson" [personType]="currentPersonType"></person-form>

  </div>
</div>

