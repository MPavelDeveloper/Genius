<div class="wrap">
  <div class="create-family">
    <div class="create-family-wrap">
      <div class="wrap-family">
        <div class="family-title">Create family</div>
        <div class="person-screen father">
          <div class="description" [hidden]="family.father">Father</div>
          <div class="description" *ngIf = "family.father">
            <person class="create-person" [person]="family.father" [templateVersion]="'shortestTemplate'"></person>
          </div>
          <div class="actions-wrap" >
  <!--          <button class="action-btn" type="button" (click)="createNewParent(personType.FATHER)" [hidden]="family.father">add</button>-->
            <button class="action-btn" type="button" (click)="selectExistParent(personType.FATHER, selectListType.PERSONS);" [hidden]="family.father" [ngClass] = "{selectHint: interfaceSelectPersonHint}">select</button>
            <button class="action-btn change" type="button" (click)="changeParent(personType.FATHER)" [hidden]="!family.father">change</button>
            <button class="action-btn delete" type="button" (click)="deleteParent(personType.FATHER)" [hidden]="!family.father">delete</button>
          </div>
        </div>

        <div class="person-screen mother">
          <div class="description" [hidden]="family.mother">Mother</div>
          <div class="description" *ngIf = "family.mother">
            <person class="create-person" [person]="family.mother" [templateVersion]="'shortestTemplate'"></person>
          </div>
          <div class="actions-wrap">
  <!--          <button class="action-btn" type="button" (click)="createNewParent(personType.MOTHER)" [hidden]="family.mother">add</button>-->
            <button class="action-btn" type="button" (click)="selectExistParent(personType.MOTHER, selectListType.PERSONS);" [hidden]="family.mother" [ngClass] = "{selectHint: interfaceSelectPersonHint}">select</button>
            <button class="action-btn change" type="button" (click)="changeParent(personType.MOTHER)" [hidden]="!family.mother">change</button>
            <button class="action-btn delete" type="button" (click)="deleteParent(personType.MOTHER)" [hidden]="!family.mother">delete</button>
          </div>
        </div>

        <div class="person-screen">
          <div class="children-plus" >
            <button class="btn-plus" type="button" (click)="addChildTemplate()" [disabled] = "getChildren() && getCompleteChildrenAmount() + 1 === getChildren().length">+</button>
          </div>
          <div class="child-container" *ngFor = 'let child of family.children; let index = index;'>
            <div class="description" [hidden]="checkChild(index)">Child</div>
            <div class="description" *ngIf = "checkChild(index)">
              <person class="create-person" [person]="child" [templateVersion]="'shortestTemplate'" ></person>
            </div>
            <div class="actions-wrap">
  <!--            <button class="action-btn" type="button" (click)="createNewChild(index)" [hidden]="checkChild(index)">add</button>-->
              <button class="action-btn" type="button" (click)="selectExistChild(index, selectListType.PERSONS)" [hidden]="checkChild(index)" [ngClass] = "{selectHint: interfaceSelectPersonHint}">select</button>
              <button class="action-btn delete" type="button" (click)="changeChild(index)" [hidden]="!checkChild(index)">change</button>
              <button class="action-btn change" type="button" (click)="deleteChild(index)" [hidden]="!checkChild(index)">delete</button>
            </div>
          </div>
        </div>
        <div class="family-actions">
          <button class="btn-add-family" type="button" (click)="saveFamily()">save Family</button>
          <button class="btn-cancel" type="button" (click)="cleanForm()">cancel</button>
        </div>
      </div>
      <div class="select-list-wrap">
        <div class="select-list-actions">
          <div class="acrions-wrap">
            <button class="action-open" (click)="setSelectListType(selectListType.PERSONS); getPersonsList()">Persons</button>
            <button class="action-open" (click)="setSelectListType(selectListType.FAMILIES); getFamilyList()">Families</button>
          </div>
          <button class="action-close" *ngIf='currentSelectType !== selectListType.NONE' (click)="setSelectListType(selectListType.NONE)">Close</button>
        </div>
        <div class="select-persons-list" *ngIf ="currentSelectType === selectListType.PERSONS">
          <div class="list_title">
            Persons
          </div>
          <ng-container *ngFor = 'let prs of persons'>
            <div class="item-person" *ngIf="prs.sex === sex.MALE" style="background-color: lightblue">
              <person class="person-short" [person]="prs" [templateVersion]="'shortTemplate'"  (returnedPerson)="setCurrentPerson($event)"></person>
            </div>
            <div class="item-person" *ngIf="prs.sex === sex.FEMALE" style="background-color: pink">
              <person class="person-short" [person]="prs" [templateVersion]="'shortTemplate'"  (returnedPerson)="setCurrentPerson($event)"></person>
            </div>
          </ng-container>
        </div>
        <div class="select-families-list" *ngIf ="currentSelectType === selectListType.FAMILIES">
          <div class="list_title">
            Families
          </div>
          <family *ngFor = "let fml of families" [family]="fml" (returnedFamily)="setCurrentFamily($event)"></family>
        </div>
      </div>
    </div>
    <person-form *ngIf="personDialogVisible"
                 [templateVersion]="personComponentTemplate.FAMILY_FORM"
                 [person]="currentPerson"
                 [personType]="currentPersonType"
                 (addedPerson)="addPersonInFamily($event)"></person-form>
  </div>
</div>

